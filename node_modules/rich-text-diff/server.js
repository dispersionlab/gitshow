const app = require('express')()
const richDiff = require('./dist')
const marked = require('marked')
const fs = require('fs')

const STYLE_CODE = `
<style>
  ins {
    background: #eaffea;
    border-bottom: 1px solid #3cb371;
  }
  del {
    color: #a33;
    text-decoration: line-through;
    background: #ffeaea;
  }
</style>
`

app.get('/', (req, res, next) => {
  const file1 = fs.readFileSync(__dirname + '/README1.md', 'utf8')
  const file2 = fs.readFileSync(__dirname + '/README2.md', 'utf8')

  res.send(STYLE_CODE + marked(richDiff(file1, file2)))
})

app.listen(4000, () => console.log('Listening 3000'))
