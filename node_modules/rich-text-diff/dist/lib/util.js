'use strict';

var isBoolean = require('lodash.isboolean');

function getNextItem(list, isAdded, isFirst) {
  if (!isBoolean(isAdded) || isAdded ^ isFirst) return list.shift();
  return {};
}

function isListItem(line) {
  return (/^\s*([-*]\s|\d+\.\s)/m.test(line)
  );
}

function wrapChange(val, isAdd) {
  if (/\n/.test(val)) return val.split('\n').map(function (v) {
    return wrapChange(v, isAdd);
  }).join('\n');
  if (!/\w+/.test(val) || !isBoolean(isAdd)) return val;

  var tag = isAdd ? 'ins' : 'del';
  return '<' + tag + '>' + val + '</' + tag + '>';
}

module.exports = {
  getNextItem: getNextItem,
  isListItem: isListItem,
  wrapChange: wrapChange
};